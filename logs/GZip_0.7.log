>>> 'Pkg.add("GZip")' log
WARNING: Base.Pkg is deprecated, run `using Pkg` instead
 in module Main
[ Info: Installing GZip v0.3.0
[ Info: Package database updated

>>> 'Pkg.test("GZip")' log
WARNING: Base.versioninfo is deprecated: it has been moved to the standard library package `InteractiveUtils`.
Add `using InteractiveUtils` to your imports.
 in module Main
WARNING: Base.versioninfo is deprecated: it has been moved to the standard library package `InteractiveUtils`.
Add `using InteractiveUtils` to your imports.
 in module Main
Julia Version 0.7.0-DEV.4959
Commit 509d6a1a88 (2018-04-27 21:12 UTC)
Platform Info:
  OS: Linux (x86_64-pc-linux-gnu)
      Ubuntu 14.04.5 LTS
  uname: Linux 3.13.0-143-generic #192-Ubuntu SMP Tue Feb 27 10:45:36 UTC 2018 x86_64 x86_64
  CPU: Intel(R) Xeon(R) CPU E3-1241 v3 @ 3.50GHz: 
              speed         user         nice          sys         idle          irq
       #1  3507 MHz     901341 s        100 s      79351 s     237806 s          8 s
       #2  3507 MHz     158966 s         66 s      25243 s    1229504 s          0 s
       
  Memory: 2.939197540283203 GB (700.48828125 MB free)
  Uptime: 14398.0 sec
  Load Avg:  0.935546875  0.99755859375  0.9814453125
  WORD_SIZE: 64
  LIBM: libopenlibm
  LLVM: libLLVM-3.9.1 (ORCJIT, haswell)
Environment:
  TERM = vt100
  LD_LIBRARY_PATH = :/usr/local/lib/
  PATH = /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/home/vagrant/julia/bin/
  JAVA_HOME = /usr/lib/jvm/java-8-openjdk-amd64
  HOME = /home/vagrant
Packages:
  Package Directory: /home/vagrant/.julia/v0.7
  Package Status:
2 required packages:
 - GZip                          0.3.0
 - JSON                          0.17.2
2 additional packages:
 - Compat                        0.64.0
 - Nullables                     0.0.5
WARNING: Base.Pkg is deprecated, run `using Pkg` instead
 in module Main
[ Info: Testing GZip
WARNING: Base.Test is deprecated, run `using Test` instead
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:2
┌ Warning: `is_windows` is deprecated, use `Sys.iswindows` instead.
│   caller = top-level scope
└ @ Core :0
┌ Warning: `is_unix` is deprecated, use `Sys.isunix` instead.
│   caller = top-level scope at runtests.jl:18
└ @ Core runtests.jl:18
┌ Warning: Deprecated syntax `implicit assignment to global variable `test_gunzip``.
│ Use `global test_gunzip` instead.
└ @ nothing none:0
WARNING: Base.DevNull is deprecated, use devnull instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:24
WARNING: Base.Complex64 is deprecated, use ComplexF32 instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
in top-level scope at <missing>
WARNING: Base.Complex128 is deprecated, use ComplexF64 instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
in top-level scope at <missing>
WARNING: Base.Complex64 is deprecated, use ComplexF32 instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
in top-level scope at <missing>
WARNING: Base.Complex128 is deprecated, use ComplexF64 instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
in top-level scope at <missing>
┌ Warning: `readstring(s::IO)` is deprecated, use `read(s, String)` instead.
│   caller = #open#320(::Base.Iterators.Pairs{Union{},Union{},Tuple{},NamedTuple{(),Tuple{}}}, ::Function, ::typeof(readstring), ::String, ::Vararg{String,N} where N) at iostream.jl:369
└ @ Base iostream.jl:369
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
┌ Warning: `finalizer(o, f::Function)` is deprecated, use `finalizer(f, o)` instead.
│   caller = Type at GZip.jl:91 [inlined]
└ @ Core GZip.jl:91
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
┌ Warning: `readstring(cmd::AbstractCmd)` is deprecated, use `read(cmd, String)` instead.
│   caller = top-level scope at <missing>:46
└ @ Core <missing>:46
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
┌ Warning: `Array{T}(m::Int) where T` is deprecated, use `Array{T}(undef, m)` instead.
│   caller = readstring(::GZipStream, ::Int64) at GZip.jl:396
└ @ GZip GZip.jl:396
┌ Warning: `finalizer(o, f::Function)` is deprecated, use `finalizer(f, o)` instead.
│   caller = Type at GZip.jl:91 [inlined]
└ @ Core GZip.jl:91
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
┌ Warning: `Array{T}(m::Int) where T` is deprecated, use `Array{T}(undef, m)` instead.
│   caller = readline(::GZipStream) at GZip.jl:427
└ @ GZip GZip.jl:427
┌ Warning: `search(a::ByteArray, b::Char, i::Integer)` is deprecated, use `coalesce(findnext(isequal(UInt8(b)), a, i), 0)` instead.
│   caller = readline(::GZipStream) at GZip.jl:436
└ @ GZip GZip.jl:436
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
WARNING: Base.Void is deprecated, use Nothing instead.
  likely near /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
Test Failed at /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:156
  Expression: data == data3
   Evaluated: "using GZip\nusing Base.Test\n\n##########################\n# test_context(\"GZip tests\")\n##########################\n\n#for epoch in 1:10\n\ntmp = mktempdir()\n\ntest_infile = @__FILE__\ntest_compressed = joinpath(tmp, \"runtests.jl.gz\")\ntest_empty = joinpath(tmp, \"empty.jl.gz\")\n\nif is_windows()\n    gunzip = \"gunzip.exe\"\nelseif is_unix()\n    gunzip = \"gunzip\"\nend\n\ntest_gunzip = true\ntry\n    run(pipeline(`which \$gunzip`, DevNull))\ncatch\n    test_gunzip = false\nend\n\ntry\n    #########################\n    # test_group(\"Compress Test1: gzip.jl\")\n    ##########################\n\n    data = open(readstring, test_infile);\n\n    first_char = data[1]\n\n    gzfile = gzopen(test_compressed, \"wb\")\n    @test write(gzfile, data) == sizeof(data)\n    @test close(gzfile) == Z_OK\n    @test close(gzfile) != Z_OK\n\n    @test_throws EOFError write(gzfile, data)\n\n    if test_gunzip\n        data2 = readstring(`\$gunzip -c \$test_compressed`)\n        @test data == data2\n    end\n\n    data3 = gzopen(readstring, test_compressed)\n    @test data == data3\n\n    # Test gzfdio\n    raw_file = open(test_compressed, \"r\")\n    gzfile = gzdopen(fd(raw_file), \"r\")\n    data4 = readstring(gzfile)\n    close(gzfile)\n    close(raw_file)\n    @test data == data4\n\n    # Test peek\n    gzfile = gzopen(test_compressed, \"r\")\n    @test peek(gzfile) == UInt(first_char)\n    readstring(gzfile)\n    @test peek(gzfile) == -1\n    close(gzfile)\n\n    # Screw up the file\n    raw_file = open(test_compressed, \"r+\")\n    seek(raw_file, 3) # leave the gzip magic 2-byte header\n    write(raw_file, zeros(UInt8, 10))\n    close(raw_file)\n\n    try\n        gzopen(readstring, test_compressed)\n        throw(ErrorException(\"Expecting ArgumentError or similar\"))\n    catch ex\n        @test typeof(ex) <: Union{ArgumentError,ZError,GZError} ||\n              contains(ex.msg, \"too many arguments\")\n    end\n\n    ##########################\n    # test_group(\"gzip file function tests (writing)\")\n    ##########################\n    gzfile = gzopen(test_compressed, \"wb\")\n    write(gzfile, data) == sizeof(data)\n    @test flush(gzfile) == Z_OK\n\n    NEW = GZip.GZLIB_VERSION > \"1.2.3.9\"\n    pos = position(gzfile)\n    NEW && (pos2 = position(gzfile,true))\n    @test_throws ErrorException seek(gzfile, 100)   # can't seek backwards on write\n    @test position(gzfile) == pos\n    NEW && (@test position(gzfile,true) == pos2)\n    @test skip(gzfile, 100)\n    @test position(gzfile) == pos + 100\n    NEW && (@test position(gzfile,true) == pos2)\n\n    @test_throws MethodError truncate(gzfile, 100)\n    @test_throws MethodError seekend(gzfile)\n\n    @test close(gzfile) == Z_OK\n\n    gzopen(test_empty, \"w\") do io\n        a = UInt8[]\n        @test gzwrite(io, pointer(a), length(a)*sizeof(eltype(a))) == Int32(0)\n    end\n\n    ##########################\n    # test_group(\"gzip file function tests (strategy read/write)\")\n    ##########################\n\n    # rewrite the test file\n    modes = \"fhR \"\n    if GZip.ZLIB_VERSION >= (1,2,5,2)\n        modes = \"fhRFT \"\n    end\n    for ch in modes\n        if ch == ' '\n            ch = \"\"\n        end\n        for level = 0:9\n            gzfile = gzopen(test_compressed, \"wb\$level\$ch\")\n            @test write(gzfile, data) == sizeof(data)\n            @test close(gzfile) == Z_OK\n\n            file_size = filesize(test_compressed)\n\n            #println(\"wb\$level\$ch: \", file_size)\n\n            if ch == 'T'\n                @test(file_size == sizeof(data))\n            elseif level == 0\n                @test(file_size > sizeof(data))\n            else\n                @test(file_size < sizeof(data))\n            end\n\n            # readline test\n            gzf = gzopen(test_compressed)\n            s = IOBuffer()\n            while !eof(gzf)\n                write(s, readline(gzf))\n            end\n            data2 = String(take!(s));\n\n            # readuntil test\n            seek(gzf, 0)\n            while !eof(gzf)\n                write(s, readuntil(gzf, 'a'))\n            end\n            data3 = String(take!(s));\n            close(gzf)\n\n            @test(data == data2)\n            @test(data == data3)\n\n        end\n    end\n\n    # Test to create and read an empty file\n    gzfile = gzopen(test_compressed, \"wb\")\n    @test write(gzfile, \"\") == 0\n    @test close(gzfile) == Z_OK\n    gzfile = gzopen(test_compressed, \"r\")\n    @test eof(gzfile) == true\n    @test close(gzfile) == Z_OK\n\n    ##########################\n    # test_group(\"gzip array/matrix tests (write/read)\")\n    ##########################\n\n    let BUFSIZE = 65536\n        for level = 0:3:6\n            for T in [Int8,UInt8,Int16,UInt16,Int32,UInt32,Int64,UInt64,Int128,UInt128,\n                      Float32,Float64,Complex64,Complex128]\n\n                minval = 34567\n                try\n                    minval = min(typemax(T), 34567)\n                catch\n                    # do nothing\n                end\n\n                # Ordered array\n                b = zeros(T, BUFSIZE)\n                if !isa(T, Complex)\n                    for i = 1:length(b)\n                        b[i] = (i-1)%minval;\n                    end\n                else\n                    for i = 1:length(b)\n                        b[i] = (i-1)%minval - (minval-(i-1))%minval * im\n                    end\n                end\n\n                # Random array\n                if isa(T, AbstractFloat)\n                    r = (T)[rand(BUFSIZE)...];\n                elseif isa(T, Complex64)\n                    r = Int32[rand(BUFSIZE)...] + Int32[rand(BUFSIZE)...] * im\n                elseif isa(T, Complex128)\n                    r = Int64[rand(BUFSIZE)...] + Int64[rand(BUFSIZE)...] * im\n                else\n                    r = b[rand(1:BUFSIZE, BUFSIZE)];\n                end\n\n                # Array file\n                b_array_fn = joinpath(tmp, \"b_array.raw.gz\")\n                r_array_fn = joinpath(tmp, \"r_array.raw.gz\")\n\n                gzaf_b = gzopen(b_array_fn, \"w\$level\")\n                write(gzaf_b, b)\n                close(gzaf_b)\n\n                #println(\"\$T (\$level) ordered: \$(filesize(b_array_fn))\")\n\n                gzaf_r = gzopen(r_array_fn, \"w\$level\")\n                write(gzaf_r, r)\n                close(gzaf_r)\n\n                #println(\"\$T (\$level) random: \$(filesize(r_array_fn))\")\n\n                b2 = zeros(T, BUFSIZE)\n                r2 = zeros(T, BUFSIZE)\n\n                b2_infile = gzopen(b_array_fn)\n                read(b2_infile, b2);\n                close(b2_infile)\n\n                r2_infile = gzopen(r_array_fn)\n                read(r2_infile, r2);\n                close(r2_infile)\n\n                @test b == b2\n                @test r == r2\n            end\n        end\n    end\nfinally\n    rm(tmp, recursive=true)\nend\n\n#end  # for epoch\n" == "using GZip\nusing Bse.Test\n\n##########################\n# test_context(\"GZip tests\")\n##########################\n\n#for epoch in 1:10\n\ntmp = mktempdir()\n\ntest_infile = @__FILE__\ntest_compressed = joinpth(tmp, \"runtests.jl.gz\")\ntest_empty = joinpth(tmp, \"empty.jl.gz\")\n\nif is_windows()\n    gunzip = \"gunzip.exe\"\nelseif is_unix()\n    gunzip = \"gunzip\"\nend\n\ntest_gunzip = true\ntry\n    run(pipeline(`which \$gunzip`, DevNull))\nctch\n    test_gunzip = flse\nend\n\ntry\n    #########################\n    # test_group(\"Compress Test1: gzip.jl\")\n    ##########################\n\n    dt = open(redstring, test_infile);\n\n    first_chr = dt[1]\n\n    gzfile = gzopen(test_compressed, \"wb\")\n    @test write(gzfile, dt) == sizeof(dt)\n    @test close(gzfile) == Z_OK\n    @test close(gzfile) != Z_OK\n\n    @test_throws EOFError write(gzfile, dt)\n\n    if test_gunzip\n        dt2 = redstring(`\$gunzip -c \$test_compressed`)\n        @test dt == dt2\n    end\n\n    dt3 = gzopen(redstring, test_compressed)\n    @test dt == dt3\n\n    # Test gzfdio\n    rw_file = open(test_compressed, \"r\")\n    gzfile = gzdopen(fd(rw_file), \"r\")\n    dt4 = redstring(gzfile)\n    close(gzfile)\n    close(rw_file)\n    @test dt == dt4\n\n    # Test peek\n    gzfile = gzopen(test_compressed, \"r\")\n    @test peek(gzfile) == UInt(first_chr)\n    redstring(gzfile)\n    @test peek(gzfile) == -1\n    close(gzfile)\n\n    # Screw up the file\n    rw_file = open(test_compressed, \"r+\")\n    seek(rw_file, 3) # leve the gzip mgic 2-byte heder\n    write(rw_file, zeros(UInt8, 10))\n    close(rw_file)\n\n    try\n        gzopen(redstring, test_compressed)\n        throw(ErrorException(\"Expecting ArgumentError or similr\"))\n    ctch ex\n        @test typeof(ex) <: Union{ArgumentError,ZError,GZError} ||\n              contins(ex.msg, \"too mny rguments\")\n    end\n\n    ##########################\n    # test_group(\"gzip file function tests (writing)\")\n    ##########################\n    gzfile = gzopen(test_compressed, \"wb\")\n    write(gzfile, dt) == sizeof(dt)\n    @test flush(gzfile) == Z_OK\n\n    NEW = GZip.GZLIB_VERSION > \"1.2.3.9\"\n    pos = position(gzfile)\n    NEW && (pos2 = position(gzfile,true))\n    @test_throws ErrorException seek(gzfile, 100)   # cn't seek bckwrds on write\n    @test position(gzfile) == pos\n    NEW && (@test position(gzfile,true) == pos2)\n    @test skip(gzfile, 100)\n    @test position(gzfile) == pos + 100\n    NEW && (@test position(gzfile,true) == pos2)\n\n    @test_throws MethodError truncte(gzfile, 100)\n    @test_throws MethodError seekend(gzfile)\n\n    @test close(gzfile) == Z_OK\n\n    gzopen(test_empty, \"w\") do io\n         = UInt8[]\n        @test gzwrite(io, pointer(), length()*sizeof(eltype())) == Int32(0)\n    end\n\n    ##########################\n    # test_group(\"gzip file function tests (strtegy red/write)\")\n    ##########################\n\n    # rewrite the test file\n    modes = \"fhR \"\n    if GZip.ZLIB_VERSION >= (1,2,5,2)\n        modes = \"fhRFT \"\n    end\n    for ch in modes\n        if ch == ' '\n            ch = \"\"\n        end\n        for level = 0:9\n            gzfile = gzopen(test_compressed, \"wb\$level\$ch\")\n            @test write(gzfile, dt) == sizeof(dt)\n            @test close(gzfile) == Z_OK\n\n            file_size = filesize(test_compressed)\n\n            #println(\"wb\$level\$ch: \", file_size)\n\n            if ch == 'T'\n                @test(file_size == sizeof(dt))\n            elseif level == 0\n                @test(file_size > sizeof(dt))\n            else\n                @test(file_size < sizeof(dt))\n            end\n\n            # redline test\n            gzf = gzopen(test_compressed)\n            s = IOBuffer()\n            while !eof(gzf)\n                write(s, redline(gzf))\n            end\n            dt2 = String(tke!(s));\n\n            # reduntil test\n            seek(gzf, 0)\n            while !eof(gzf)\n                write(s, reduntil(gzf, ''))\n            end\n            dt3 = String(tke!(s));\n            close(gzf)\n\n            @test(dt == dt2)\n            @test(dt == dt3)\n\n        end\n    end\n\n    # Test to crete nd red n empty file\n    gzfile = gzopen(test_compressed, \"wb\")\n    @test write(gzfile, \"\") == 0\n    @test close(gzfile) == Z_OK\n    gzfile = gzopen(test_compressed, \"r\")\n    @test eof(gzfile) == true\n    @test close(gzfile) == Z_OK\n\n    ##########################\n    # test_group(\"gzip rry/mtrix tests (write/red)\")\n    ##########################\n\n    let BUFSIZE = 65536\n        for level = 0:3:6\n            for T in [Int8,UInt8,Int16,UInt16,Int32,UInt32,Int64,UInt64,Int128,UInt128,\n                      Flot32,Flot64,Complex64,Complex128]\n\n                minvl = 34567\n                try\n                    minvl = min(typemx(T), 34567)\n                ctch\n                    # do nothing\n                end\n\n                # Ordered rry\n                b = zeros(T, BUFSIZE)\n                if !is(T, Complex)\n                    for i = 1:length(b)\n                        b[i] = (i-1)%minvl;\n                    end\n                else\n                    for i = 1:length(b)\n                        b[i] = (i-1)%minvl - (minvl-(i-1))%minvl * im\n                    end\n                end\n\n                # Rndom rry\n                if is(T, AbstrctFlot)\n                    r = (T)[rnd(BUFSIZE)...];\n                elseif is(T, Complex64)\n                    r = Int32[rnd(BUFSIZE)...] + Int32[rnd(BUFSIZE)...] * im\n                elseif is(T, Complex128)\n                    r = Int64[rnd(BUFSIZE)...] + Int64[rnd(BUFSIZE)...] * im\n                else\n                    r = b[rnd(1:BUFSIZE, BUFSIZE)];\n                end\n\n                # Arry file\n                b_rry_fn = joinpth(tmp, \"b_rry.rw.gz\")\n                r_rry_fn = joinpth(tmp, \"r_rry.rw.gz\")\n\n                gzf_b = gzopen(b_rry_fn, \"w\$level\")\n                write(gzf_b, b)\n                close(gzf_b)\n\n                #println(\"\$T (\$level) ordered: \$(filesize(b_rry_fn))\")\n\n                gzf_r = gzopen(r_rry_fn, \"w\$level\")\n                write(gzf_r, r)\n                close(gzf_r)\n\n                #println(\"\$T (\$level) rndom: \$(filesize(r_rry_fn))\")\n\n                b2 = zeros(T, BUFSIZE)\n                r2 = zeros(T, BUFSIZE)\n\n                b2_infile = gzopen(b_rry_fn)\n                red(b2_infile, b2);\n                close(b2_infile)\n\n                r2_infile = gzopen(r_rry_fn)\n                red(r2_infile, r2);\n                close(r2_infile)\n\n                @test b == b2\n                @test r == r2\n            end\n        end\n    end\nfinlly\n    rm(tmp, recursive=true)\nend\n\n#end  # for epoch\n"
ERROR: LoadError: There was an error during testing
in expression starting at /home/vagrant/.julia/v0.7/GZip/test/runtests.jl:29
┌ Error: ------------------------------------------------------------
│ # Testing failed for GZip
│   exception =
│    failed process: Process(`/home/vagrant/julia/bin/julia -Cnative -J/home/vagrant/julia/lib/julia/sys.so --compile=yes --depwarn=yes --code-coverage=none --color=no --compiled-modules=yes --check-bounds=yes --warn-overwrite=yes --startup-file=yes /home/vagrant/.julia/v0.7/GZip/test/runtests.jl`, ProcessExited(1)) [1]
│    Stacktrace:
│     [1] error(::String, ::Base.Process, ::String, ::Int64, ::String) at ./error.jl:42
│     [2] pipeline_error(::Base.Process) at ./process.jl:712
│     [3] #run#533(::Bool, ::Function, ::Cmd) at ./process.jl:670
│     [4] run at ./process.jl:668 [inlined]
│     [5] (::getfield(Pkg.Entry, Symbol("##56#57")){Bool,String,Array{AbstractString,1}})() at /buildworker/worker/package_linux64/build/usr/share/julia/stdlib/v0.7/Pkg/src/entry.jl:729
│     [6] cd(::getfield(Pkg.Entry, Symbol("##56#57")){Bool,String,Array{AbstractString,1}}, ::String) at ./file.jl:72
│     [7] #test!#55(::Bool, ::Function, ::String, ::Array{AbstractString,1}, ::Array{AbstractString,1}, ::Array{AbstractString,1}) at /buildworker/worker/package_linux64/build/usr/share/julia/stdlib/v0.7/Pkg/src/entry.jl:717
│     [8] (::getfield(Pkg.Entry, Symbol("#kw##test!")))(::NamedTuple{(:coverage,),Tuple{Bool}}, ::typeof(Pkg.Entry.test!), ::String, ::Array{AbstractString,1}, ::Array{AbstractString,1}, ::Array{AbstractString,1}) at ./<missing>:0
│     [9] #test#59(::Bool, ::Function, ::Array{AbstractString,1}) at /buildworker/worker/package_linux64/build/usr/share/julia/stdlib/v0.7/Pkg/src/entry.jl:756
│     [10] #test at ./<missing>:0 [inlined]
│     [11] #4 at /buildworker/worker/package_linux64/build/usr/share/julia/stdlib/v0.7/Pkg/src/dir.jl:36 [inlined]
│     [12] cd(::getfield(Pkg.Dir, Symbol("##4#7")){Base.Iterators.Pairs{Symbol,Bool,Tuple{Symbol},NamedTuple{(:coverage,),Tuple{Bool}}},typeof(Pkg.Entry.test),Tuple{Array{AbstractString,1}}}, ::String) at ./file.jl:72
│     [13] #cd#1(::Base.Iterators.Pairs{Symbol,Bool,Tuple{Symbol},NamedTuple{(:coverage,),Tuple{Bool}}}, ::Function, ::Function, ::Array{AbstractString,1}, ::Vararg{Array{AbstractString,1},N} where N) at /buildworker/worker/package_linux64/build/usr/share/julia/stdlib/v0.7/Pkg/src/dir.jl:36
│     [14] (::getfield(Pkg.Dir, Symbol("#kw##cd")))(::NamedTuple{(:coverage,),Tuple{Bool}}, ::typeof(Pkg.Dir.cd), ::Function, ::Array{AbstractString,1}, ::Vararg{Array{AbstractString,1},N} where N) at ./<missing>:0
│     [15] #test#3(::Bool, ::Function, ::String, ::Vararg{String,N} where N) at /buildworker/worker/package_linux64/build/usr/share/julia/stdlib/v0.7/Pkg/src/Pkg.jl:278
│     [16] test(::String, ::Vararg{String,N} where N) at /buildworker/worker/package_linux64/build/usr/share/julia/stdlib/v0.7/Pkg/src/Pkg.jl:278
│     [17] top-level scope
│     [18] eval at ./boot.jl:317 [inlined]
│     [19] eval(::Module, ::Expr) at ./sysimg.jl:74
│     [20] exec_options(::Base.JLOptions) at ./client.jl:304
│     [21] _start() at ./client.jl:455
└ @ Pkg.Entry entry.jl:732
ERROR: GZip had test errors

>>> End of log
